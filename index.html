<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>From Chalkboards to Chatbots</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&amp;display=swap" rel="stylesheet"/>
<style>
  /* --- 1. THEME & COLORS --- */
  :root{
    --paper:#FFFDF7;     
    --surface:#FFFFFF;   
    --ink:#1F2937;       
    --muted:#6B7280;     
    --border:#E7E5E4;    
    --blue:#012169;      
    --red:#C8102E;
    --green:#059669; 
    
    /* Card Size Settings */
    --card-height: 65vh; 
    --card-width: 1000px;
  }

  /* --- 2. BASIC LAYOUT --- */
  *{box-sizing:border-box}
  
  html, body {
    height: 100%;
    margin: 0;
    overflow: hidden; 
  }

  body{
    background: var(--paper);
    background-image: linear-gradient(135deg, rgba(1,33,105,.05), rgba(255,253,247,0) 35%, rgba(200,16,46,.05) 100%);
    color:var(--ink);
    font-family:'Plus Jakarta Sans', sans-serif;
    display: flex;
    flex-direction: column;
  }

  /* --- 3. HEADER --- */
  header{
    background: var(--blue);
    color: #fff;
    border-bottom: 4px solid var(--red);
    padding: 12px 16px;
    flex-shrink: 0;
    z-index: 1000;
    position: relative;
  }
  .header-container {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    position: relative;
  }
  .logo {
    height: 45px;
    width: auto;
    border-radius: 50%;
    box-shadow: 0 0 0 2px rgba(255,255,255,0.3);
  }
  .headings {
    display: flex;
    flex-direction: column;
  }
  .main-title {
    font-size: 20px;
    font-weight: 800;
    line-height: 1.2;
  }
  .sub-title {
    font-size: 13px;
    opacity: 0.9;
    font-weight: 400;
  }

  /* Sound Toggle Button */
  #sound-btn {
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: #fff;
    font-size: 1.2rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  #sound-btn:hover {
    background: rgba(255, 255, 255, 0.4);
  }
  @media (max-width: 600px) {
    #sound-btn {
        position: static;
        margin-left: auto;
    }
    .header-container {
        justify-content: flex-start;
    }
  }

  /* --- 4. MAIN STACK AREA --- */
  main {
    flex-grow: 1;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .stack-container {
    position: relative;
    width: var(--card-width);
    max-width: 95%;
    height: var(--card-height);
    margin: auto; 
  }

  .slide-card {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    background-color: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    
    cursor: default; 
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.6s;
    will-change: transform, opacity;
  }

  /* Common style for content */
  .slide-content {
    display: block;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 12px;
  }

  /* --- SPECIAL HTML CARD STYLES --- */
  .html-card-content {
    width: 100%;
    height: 100%;
    overflow-y: auto; 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start; /* Ensures content starts at top */
    padding: 70px 20px 40px; /* Top padding prevents title cut-off */
    text-align: center;
  }

  .html-card-content h2 {
    font-size: 2rem;
    color: var(--blue);
    margin-bottom: 30px;
    margin-top: 0;
  }

  /* Standard Tools Grid */
  .tools-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); 
    gap: 15px;
    width: 100%;
    max-width: 700px;
    padding-bottom: 20px;
  }

  .tool-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 15px 20px;
    background: #F3F4F6;
    border: 1px solid var(--border);
    border-radius: 12px;
    color: var(--ink);
    text-decoration: none;
    font-weight: 700;
    font-size: 1rem;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  .tool-btn:hover {
    transform: translateY(-3px);
    background: #fff;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }

  /* --- PILL BUTTONS (For Gamification Card) --- */
  .pill-btn {
    position: absolute;
    padding: 10px 18px;
    background: #fff;
    border: 2px solid var(--blue);
    color: var(--blue);
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
    text-decoration: none;
    z-index: 20;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    pointer-events: auto;
  }
  .pill-btn:hover {
    background: var(--blue);
    color: #fff;
    transform: scale(1.05);
  }
  .pill-btn.top-right {
    top: 15px;
    right: 15px;
  }
  .pill-btn.bottom-right {
    bottom: 15px;
    right: 15px;
  }

  /* --- CHRISTMAS SPECIAL STYLES --- */
  details {
    width: 100%;
    max-width: 800px;
    background: rgba(255,255,255,0.8);
    border-radius: 16px;
    padding: 20px;
    border: 1px solid var(--border);
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    margin-bottom: 20px;
  }

  summary {
    font-size: 1.8rem;
    font-weight: 800;
    color: var(--red);
    cursor: pointer;
    margin-bottom: 15px;
    list-style: none;
    text-align: center;
    user-select: none;
  }
  summary::-webkit-details-marker {
    display: none;
  }

  .inner-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    padding-top: 10px;
  }
  
  .inner-link {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 10px;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 10px;
    text-decoration: none;
    font-weight: 700;
    font-size: 0.95rem;
    transition: all 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    text-align: center;
  }
  .inner-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
  }

  @media (max-width: 600px) {
    .tools-grid, .inner-grid {
        grid-template-columns: 1fr; 
    }
  }

  /* Image specific */
  .slide-image {
    pointer-events: none; 
  }

  /* Video specific */
  .slide-video {
    pointer-events: auto;
  }

  /* --- WATERMARK (NEXT BUTTON) --- */
  .watermark {
    position: absolute;
    top: 15px;
    left: 15px;
    width: 80px;
    height: auto;
    opacity: 0.6; 
    pointer-events: auto; 
    cursor: pointer;
    z-index: 10;
    transition: all 0.2s;
  }
  .watermark:hover {
    opacity: 1;
    transform: scale(1.05);
  }

  /* --- PREVIOUS BUTTON (Bottom Left) --- */
  .prev-btn {
    position: absolute;
    bottom: 15px;
    left: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--border);
    color: var(--blue);
    
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    font-weight: bold;
    
    pointer-events: auto;
    cursor: pointer;
    z-index: 10;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.2s;
  }

  .prev-btn:hover {
    background: #fff;
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  }
  
  /* --- LINK BUTTON (Bottom Right) --- */
  .link-btn {
    position: absolute;
    bottom: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--blue);
    border: 2px solid #fff;
    color: #fff;
    text-decoration: none;
    
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    
    pointer-events: auto;
    cursor: pointer;
    z-index: 12;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: all 0.2s;
  }

  .link-btn:hover {
    background: var(--red);
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }

  /* --- QR BUTTON (Top Right) --- */
  .qr-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #fff;
    border: 1px solid var(--border);
    color: var(--ink);
    font-weight: bold;
    font-size: 0.8rem;
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    pointer-events: auto;
    cursor: pointer;
    z-index: 12;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: all 0.2s;
  }
  .qr-btn:hover {
    transform: scale(1.1);
    color: var(--blue);
    border-color: var(--blue);
  }

  /* --- MIZOU BUTTON (Middle Right) --- */
  .mizou-btn {
    position: absolute;
    top: 50%;
    right: 15px;
    transform: translateY(-50%); /* Centered vertically */
    
    width: 46px; 
    height: 46px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid var(--blue);
    color: var(--blue);
    font-weight: 800;
    font-size: 0.65rem; 
    text-decoration: none;
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    pointer-events: auto;
    cursor: pointer;
    z-index: 12;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: all 0.2s;
  }
  .mizou-btn:hover {
    background: var(--blue);
    color: #fff;
    transform: translateY(-50%) scale(1.1);
  }

  /* --- MODAL FOR QR CODE --- */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .modal-overlay.show {
    opacity: 1;
    pointer-events: auto;
  }

  .modal-content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
  }

  .modal-image {
    display: block;
    max-width: 100%;
    max-height: 80vh;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }

  .close-modal {
    position: absolute;
    top: -40px;
    right: 0;
    color: #fff;
    font-size: 35px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s;
  }
  .close-modal:hover {
    color: var(--red);
  }

  .slide-card.gone {
    transform: translateX(-120%) rotate(-15deg) !important;
    opacity: 0;
    pointer-events: none;
  }

  /* --- 5. FOOTER --- */
  footer {
    background: var(--blue);
    color: #FFF;
    text-align: center;
    padding: 10px;
    font-size: 13px;
    flex-shrink: 0;
    z-index: 1000;
  }

  #reset-btn {
    margin-top: 8px;
    background-color: var(--surface);
    color: var(--blue);
    border: none;
    padding: 6px 20px;
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 700;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: all 0.2s;
  }
  
  #reset-btn:hover { 
    transform: translateY(-2px); 
    background-color: #fff;
  }
  
  #reset-btn.hidden {
    display: none;
  }

</style>
</head>
<body>

<audio id="card-sound" src="1.mp3" preload="auto"></audio>

<div id="qr-modal" class="modal-overlay">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <img src="qr.png" alt="QR Code" class="modal-image">
  </div>
</div>

<header>
  <div class="header-container">
    <img src="pdhub-logo.png" alt="Logo" class="logo">
    <div class="headings">
      <div class="main-title">From Chalkboards to Chatbots</div>
      <div class="sub-title">A Practical AI Survival Guide for EFL Teachers</div>
    </div>
    
    <button id="sound-btn" title="Toggle Sound" style="opacity: 0.6;">üîá</button>
  </div>
</header>

<main>
  <div class="stack-container" id="stack">
    </div>
</main>

<footer>
  <div>‚ú®‚úçÔ∏è Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved ‚úçÔ∏è‚ú®</div>
  <button id="reset-btn" class="hidden">Start Over ‚Ü∫</button>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const stackContainer = document.getElementById('stack');
    const sound = document.getElementById('card-sound');
    const soundBtn = document.getElementById('sound-btn');
    const resetButton = document.getElementById('reset-btn');
    
    // Modal Elements
    const qrModal = document.getElementById('qr-modal');
    const closeModal = document.querySelector('.close-modal');

    // Close Modal Logic
    function hideModal() {
        qrModal.classList.remove('show');
    }
    closeModal.addEventListener('click', hideModal);
    qrModal.addEventListener('click', (e) => {
        if(e.target === qrModal) hideModal();
    });

    // Sound State: Default to FALSE (Off)
    let isSoundOn = false;

    soundBtn.addEventListener('click', () => {
        isSoundOn = !isSoundOn;
        soundBtn.textContent = isSoundOn ? 'üîä' : 'üîá';
        soundBtn.style.opacity = isSoundOn ? '1' : '0.6';
    });

    // 1. Define Slide Sequence
    const slides = [];

    slides.push('0');
    
    // Cards 1-5
    for (let i = 1; i <= 5; i++) slides.push(i.toString());

    // ** GAMIFICATION CARD (Between 5 and 6) **
    slides.push('gamification');

    // Cards 6-15 (Skipping 10)
    for (let i = 6; i <= 15; i++) {
        if (i === 10) continue;
        slides.push(i.toString());
    }
    
    // REMOVED 16b
    slides.push('16a'); 
    
    // REMOVED 17
    slides.push('18');
    
    // Video Card
    slides.push('The Goldilocks Tech Rule.mp4'); 

    // REMOVED 21 and 22
    for (let i = 19; i <= 26; i++) {
        if (i === 21 || i === 22) continue;
        slides.push(i.toString());
    }
    
    slides.push('27a', '27b');
    for (let i = 28; i <= 40; i++) slides.push(i.toString());
    slides.push('41a', '41b'); 
    
    // Card 42 to 50
    for (let i = 42; i <= 50; i++) slides.push(i.toString());
    
    // ** IMAGE CHANGER CARD **
    slides.push('changer');
    
    // Card 51
    slides.push('51');
    
    for (let i = 53; i <= 67; i++) slides.push(i.toString());

    // ** TOOLS CARD **
    slides.push('TOOLS_CARD');
    
    // ** CHRISTMAS CARD **
    slides.push('CHRISTMAS_CARD');

    let totalCards = slides.length;
    let currentIndex = 0;
    let cardElements = [];

    // Helper: Add Link Button
    function addLinkButton(card, url) {
        const linkBtn = document.createElement('a');
        linkBtn.href = url;
        linkBtn.target = "_blank"; 
        linkBtn.className = 'link-btn';
        linkBtn.innerHTML = 'üîó'; 
        linkBtn.title = "Open Link";
        linkBtn.addEventListener('click', (e) => e.stopPropagation());
        card.appendChild(linkBtn);
    }

    // Helper: Add QR Button
    function addQrButton(card) {
        const qrBtn = document.createElement('div');
        qrBtn.className = 'qr-btn';
        qrBtn.textContent = 'QR';
        qrBtn.title = "Show QR Code";
        qrBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            qrModal.classList.add('show');
        });
        card.appendChild(qrBtn);
    }

    // 2. Build Stack
    function createStack() {
      stackContainer.innerHTML = ''; 
      cardElements = [];
      currentIndex = 0;
      resetButton.classList.add('hidden');

      slides.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'slide-card';
        card.style.zIndex = totalCards - index;

        // --- CONTENT CREATION ---
        
        // 1. TOOLS CARD
        if (item === 'TOOLS_CARD') {
            const htmlContent = document.createElement('div');
            htmlContent.className = 'html-card-content';
            htmlContent.innerHTML = `
              <h2>üõ†Ô∏è Tools & Resources</h2>
              <div class="tools-grid">
                 <a href="https://domvrosepimorfosi.github.io/brisk-notebooklm/" target="_blank" class="tool-btn" style="color:var(--ink)">Brisk & NotebookLM</a>
                 <a href="https://domvrosepimorfosi.github.io/using-magicschool/" target="_blank" class="tool-btn" style="color:#7c3aed">MagicSchool AI</a>
                 <a href="https://domvrosepimorfosi.github.io/tech-integration/" target="_blank" class="tool-btn" style="color:#0d9488">Tech Integration</a>
                 <a href="https://goblin.tools/" target="_blank" class="tool-btn" style="color:#d97706">Goblin Tools</a>
                 <a href="https://classroomzen.com/" target="_blank" class="tool-btn" style="color:#4f46e5">Classroom Zen</a>
                 <a href="https://domvrosepimorfosi.github.io/be-the-bot/" target="_blank" class="tool-btn" style="color:#C8102E">Be the Bot</a>
                 <a href="https://domvrosepimorfosi.github.io/using-storybook/" target="_blank" class="tool-btn">Gemini Storybook</a>
                 <a href="https://domvrosepimorfosi.github.io/ict-tools-categorised/" target="_blank" class="tool-btn">Tools by Category</a>
                 <a href="https://domvrosepimorfosi.github.io/EFLTools-Suggested-List/" target="_blank" class="tool-btn">Suggested List</a>
                 <a href="https://domvrosepimorfosi.github.io/ict-tools-presentation/" target="_blank" class="tool-btn">Basic ICT Tools</a>
                 <a href="https://domvrosepimorfosi.github.io/sonnet-letmecount/" target="_blank" class="tool-btn">Sonnet Activity</a>
                 <a href="https://pa-domvros.github.io/EFL-Shakespeare-Challenge/" target="_blank" class="tool-btn">Shakespeare Challenge</a>
              </div>
            `;
            const links = htmlContent.querySelectorAll('a');
            links.forEach(l => l.addEventListener('click', e => e.stopPropagation()));
            card.appendChild(htmlContent);
            
        } 
        // 2. CHRISTMAS CARD
        else if (item === 'CHRISTMAS_CARD') {
            const htmlContent = document.createElement('div');
            htmlContent.className = 'html-card-content';
            htmlContent.innerHTML = `
                <details open>
                  <summary>üéÑ Christmas Special</summary>
                  <div class="content-body">
                    <div class="inner-grid">
                      <a href="https://domvrosepimorfosi.github.io/Christmas-Classroom-Match/" target="_blank" class="inner-link" style="color:var(--green)">üéÅ Classroom Match</a>
                      <a href="https://domvrosepimorfosi.github.io/Dear-Santa/" target="_blank" class="inner-link" style="color:var(--red)">üéÖ Dear Santa</a>
                      <a href="https://domvrosepimorfosi.github.io/Santas-Crazy-Night/" target="_blank" class="inner-link" style="color:var(--green)">üåô Santa's Crazy Night</a>
                      <a href="https://domvrosepimorfosi.github.io/Christmas-Clash/" target="_blank" class="inner-link" style="color:var(--red)">‚öîÔ∏è Christmas Clash</a>
                      <a href="https://domvrosepimorfosi.github.io/Christmas-Logic-Grid-Puzzle/" target="_blank" class="inner-link" style="color:var(--green)">üß© Logic Grid Puzzle</a>
                      <a href="https://domvrosepimorfosi.github.io/Project-Sleigh-Ride/" target="_blank" class="inner-link" style="color:var(--red)">üõ∑ Project Sleigh Ride</a>
                      <a href="https://domvrosepimorfosi.github.io/xmas-secrets/" target="_blank" class="inner-link" style="color:var(--green)">ü§´ Xmas Secrets</a>
                      <a href="https://domvrosepimorfosi.github.io/santa-abduction/" target="_blank" class="inner-link" style="color:var(--red)">üõ∏ Santa Abduction</a>
                      <a href="https://domvrosepimorfosi.github.io/gift-mixup/" target="_blank" class="inner-link" style="color:var(--green)">üõçÔ∏è Gift Mix-Up</a>
                      <a href="https://domvrosepimorfosi.github.io/mission-save-santa/" target="_blank" class="inner-link" style="color:var(--red)">ü¶∏ Mission Save Santa</a>
                      <a href="https://domvrosepimorfosi.github.io/christmas-grammar-save/" target="_blank" class="inner-link" style="color:var(--green)">üìñ Grammar Save</a>
                      <a href="https://domvrosepimorfosi.github.io/generational-christmas/" target="_blank" class="inner-link" style="color:var(--red)">üëµ Generational Christmas</a>
                      <a href="https://panagiotis-domvros.github.io/strange-things-at-Christmas/" target="_blank" class="inner-link" style="color:var(--green)">üî¶ Stranger Things</a>
                      <a href="https://domvrosepimorfosi.github.io/Hogwarts-Christmas/" target="_blank" class="inner-link" style="color:var(--red)">ü™Ñ Hogwarts Christmas</a>
                      <a href="https://domvrosepimorfosi.github.io/christmas-chase-extravaganza/" target="_blank" class="inner-link" style="color:var(--green)">üèÉ Chase Extravaganza</a>
                    </div>
                  </div>
                </details>
            `;
            const links = htmlContent.querySelectorAll('a');
            links.forEach(l => l.addEventListener('click', e => e.stopPropagation()));
            // Stop propagation on summary click too, to prevent card flip
            const summary = htmlContent.querySelector('summary');
            if(summary) summary.addEventListener('click', e => e.stopPropagation());
            
            card.appendChild(htmlContent);
        }
        // 3. Video
        else if (item.toString().toLowerCase().endsWith('.mp4')) {
            const vid = document.createElement('video');
            vid.src = item;
            vid.className = 'slide-content slide-video';
            vid.controls = true; 
            card.appendChild(vid);
        } 
        // 4. Standard Image
        else {
            const img = document.createElement('img');
            img.src = `${item}.png`; 
            img.alt = `Slide ${item}`;
            img.className = 'slide-content slide-image';
            if (index > 2) img.loading = "lazy";
            card.appendChild(img);
        }
        
        // --- WATERMARK (NEXT BUTTON) ---
        const watermark = document.createElement('img');
        watermark.src = 'pdhub-logo.png';
        watermark.className = 'watermark';
        watermark.title = "Click to Next Slide";
        card.appendChild(watermark);

        // --- PREVIOUS BUTTON ---
        if (index > 0) { 
            const prevBtn = document.createElement('div');
            prevBtn.className = 'prev-btn';
            prevBtn.innerHTML = '&#8617;'; 
            prevBtn.title = "Previous Slide";
            
            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation(); 
                handlePrevClick();
            });
            
            card.appendChild(prevBtn);
        }

        // --- SPECIFIC CARD BUTTONS ---

        // NEW: Gamification Card Buttons
        if (item === 'gamification') {
            // Top Right
            const btn1 = document.createElement('a');
            btn1.href = "https://domvrosepimorfosi.github.io/Speed-Pantry/";
            btn1.target = "_blank";
            btn1.className = 'pill-btn top-right';
            btn1.textContent = "Gamification";
            btn1.addEventListener('click', (e) => e.stopPropagation());
            card.appendChild(btn1);

            // Bottom Right
            const btn2 = document.createElement('a');
            btn2.href = "https://domvrosepimorfosi.github.io/The-Picky-Customer/";
            btn2.target = "_blank";
            btn2.className = 'pill-btn bottom-right';
            btn2.textContent = "Digital Game";
            btn2.addEventListener('click', (e) => e.stopPropagation());
            card.appendChild(btn2);
        }

        // Card 7: SAMR Tenses
        if (item === '7') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/SAMR-tenses/");
        }

        // Card 12: SAMR Sonnet
        if (item === '12') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/SAMR-analysis-sonnet130/");
        }
        
        // Card 24: TechCheck Rubric
        if (item === '24') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/techcheck-rubric/");
        }

        // Card 25: ICT Lesson Planner
        if (item === '25') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/ICT-LessonPlanner/");
        }

        // Card 35: Mizou Chatbot & QR Code & Mizou Link
        if (item === '35') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/mizou-chatbot/");
            addQrButton(card);
            
            const mizouBtn = document.createElement('a');
            mizouBtn.href = "https://mizou.com/bot";
            mizouBtn.target = "_blank";
            mizouBtn.className = 'mizou-btn';
            mizouBtn.textContent = 'Mizou';
            mizouBtn.title = "Open Mizou Bot";
            mizouBtn.addEventListener('click', (e) => e.stopPropagation());
            card.appendChild(mizouBtn);
        }

        // Card 40: AI Ideation Race
        if (item === '40') {
            addLinkButton(card, "https://domvrosepimorfosi.github.io/ai-ideation-race/");
        }
        
        // --- NEXT CLICK LISTENER (Attached ONLY to Watermark) ---
        watermark.addEventListener('click', (e) => {
            e.stopPropagation(); 
            handleCardNext(card, index);
        });
        
        stackContainer.appendChild(card);
        cardElements.push(card);
      });
    }

    // 3. Handle NEXT (Dismiss Card)
    function handleCardNext(card, index) {
      if (index !== currentIndex) return;

      if (isSoundOn && sound) {
        sound.currentTime = 0;
        sound.play().catch(e => console.log("Audio play prevented:", e));
      }

      // If it's a video, pause it before removing card
      const videoElement = card.querySelector('video');
      if (videoElement) {
          videoElement.pause();
      }

      card.classList.add('gone');
      currentIndex++;

      if (currentIndex === totalCards) {
        resetButton.classList.remove('hidden');
      }
    }

    // 4. Handle PREVIOUS (Restore Card)
    function handlePrevClick() {
        if (currentIndex <= 0) return; 

        currentIndex--;
        const cardToRestore = cardElements[currentIndex];
        
        if (cardToRestore) {
            cardToRestore.classList.remove('gone');
        }

        if (currentIndex < totalCards) {
            resetButton.classList.add('hidden');
        }
    }

    // 5. Reset All
    resetButton.addEventListener('click', () => {
      currentIndex = 0;
      cardElements.forEach(card => {
        card.classList.remove('gone');
        const vid = card.querySelector('video');
        if(vid) vid.currentTime = 0;
      });
      resetButton.classList.add('hidden');
    });

    createStack();
  });
</script>

</body>
</html>